<div class="row mb-2 mb-xl-3">
		<div class="col-auto d-none d-sm-block">
			<h1 class="h3 mb-3">Dashboard</h1>
		</div>

		<div class="col-auto ms-auto text-end mt-n1">
			<a class="btn btn-light bg-white shadow-sm" href="#" data-bs-toggle="dropdown" data-bs-display="static">
				<i class="align-middle mt-n1" data-feather="calendar"></i> Hari ini |
				<%= @date.to_date %>
			</a>
		</div>
	</div>
	<div class="row">
		<div class="col-12">
			<div class="w-100">
				<div class="row">
					<div class="col-sm-3 col-lg-12 col-xxl-3 d-flex">
						<div class="card illustration flex-fill">
							<div class="card-body p-0 d-flex flex-fill">
								<div class="row g-0 w-100">
									<div class="col-6">
										<div class="illustration-text p-3 m-1">
											<h4 class="illustration-text">Selamat Datang, <%= current_admin.name %></h4>
											<p class="mb-0">Sppayment Dashboard</p>
										</div>
									</div>
									<div class="col-6 align-self-end text-end">
										<%= image_tag "dashboard.png", class: "img-fluid illustration-img", alt: "dashboard" %>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="col-sm-3 col-lg-12 col-xxl-3 d-flex">
						<div class="card flex-fill">
							<div class="card-body">
								<div class="row">
									<div class="col mt-0">
										<h5 class="card-title">Jumlah data Siswa</h5>
									</div>
									<div class="col-auto">
										<div class="stat stat-sm">
											<i class="align-middle" data-feather="users"></i>
										</div>
									</div>
								</div>
								<span class="h1 d-inline-block mt-1 mb-4"><%= @students %> <span class="fs-3">Siswa</span></span>
								<div class="mb-0">
									<span class="badge badge-soft-info me-2 fs-6">Di tahun <%= @date.strftime("%Y") %></span>
								</div>
							</div>
						</div>
					</div>
					<div class="col-sm-3 col-lg-12 col-xxl-3 d-flex">
						<div class="card flex-fill">
							<div class="card-body">
								<div class="row">
									<div class="col mt-0">
										<h5 class="card-title">Jumlah data Staff</h5>
									</div>
									<div class="col-auto">
										<div class="stat stat-sm">
											<i class="align-middle" data-feather="users"></i>
										</div>
									</div>
								</div>
								<span class="h1 d-inline-block mt-1 mb-4"><%= @staffs %> <span class="fs-3">Staff</span></span>
								<div class="mb-0">
									<span class="badge badge-soft-info me-2 fs-6">Di tahun <%= @date.strftime("%Y") %></span>
								</div>
							</div>
						</div>
					</div>
					<div class="col-sm-3 col-lg-12 col-xxl-3 d-flex">
						<div class="card flex-fill">
							<div class="card-body">
								<div class="row">
									<div class="col mt-0">
										<h5 class="card-title">Jumlah data Jurusan</h5>
									</div>
									<div class="col-auto">
										<div class="stat stat-sm">
											<i class="align-middle" data-feather="briefcase"></i>
										</div>
									</div>
								</div>
								<span class="h1 d-inline-block mt-1 mb-4"><%= @majors %> <span class="fs-3">Jurusan</span></span>
								<div class="mb-0">
									<span class="badge badge-soft-info me-2 fs-6">Di tahun <%= @date.strftime("%Y") %></span>
								</div>
							</div>
						</div>
					</div>
					<div class="col-sm-3 col-lg-12 col-xxl-3 d-flex">
						<div class="card flex-fill bg-opacity-25 bg-danger">
							<div class="card-body">
								<div class="row">
									<div class="col mt-0">
										<h5 class="card-title">Spp Belum Bayar</h5>
									</div>
									<div class="col-auto">
										<div class="rounded rounded-circle stat-sm bg-danger bg-opacity-25">
											<i class="align-middle text-danger" data-feather="dollar-sign"></i>
										</div>
									</div>
								</div>
								<span class="h1 d-inline-block mt-1 mb-4"><%= @not_payments %> <span class="fs-3">Siswa</span></span>
								<div class="mb-0">
									<span class="badge badge-soft-danger me-2 fs-6">Dari <%= @students %> Siswa di bulan <%= @date.strftime("%B")%></span>
								</div>
							</div>
						</div>
					</div>
					<div class="col-sm-3 col-lg-12 col-xxl-3 d-flex">
						<div class="card flex-fill">
							<div class="card-body flex-fill bg-opacity-25 bg-success">
								<div class="row">
									<div class="col mt-0">
										<h5 class="card-title">Spp Sudah Bayar</h5>
									</div>
									<div class="col-auto">
										<div class="rounded rounded-circle stat-sm bg-success bg-opacity-25">
											<i class="align-middle text-success" data-feather="dollar-sign"></i>
										</div>
									</div>
								</div>
								<span class="h1 d-inline-block mt-1 mb-4"><%= @has_payments %> <span class="fs-3">Siswa</span></span>
								<div class="mb-0">
									<span class="badge badge-soft-info me-2 fs-6">Dari <%= @students %> Siswa di bulan <%= @date.strftime("%B")%></span>
									
								</div>
							</div>
						</div>
					</div>
					<div class="col-sm-3 col-lg-12 col-xxl-3 d-flex">
						<div class="card flex-fill">
							<div class="card-body">
								<div class="row">
									<div class="col mt-0">
										<h5 class="card-title">Jumlah data Kelas</h5>
									</div>
									<div class="col-auto">
										<div class="stat stat-sm">
											<i class="align-middle" data-feather="bookmark"></i>
										</div>
									</div>
								</div>
								<span class="h1 d-inline-block mt-1 mb-4"><%= @classes %> <span class="fs-3">Kelas</span></span>
								<div class="mb-0">
									<span class="badge badge-soft-info me-2 fs-6">Dari <%= @majors %> Jurusan</span>
								</div>
							</div>
						</div>
					</div>
					<div class="col-sm-3 col-lg-12 col-xxl-3 d-flex">
						<div class="card flex-fill">
							<div class="card-body">
								<div class="row">
									<div class="col mt-0">
										<h5 class="card-title">Jumlah data alumni</h5>
									</div>
									<div class="col-auto">
										<div class="stat stat-sm">
											<i class="align-middle" data-feather="users"></i>
										</div>
									</div>
								</div>
								<span class="h1 d-inline-block mt-1 mb-4"><%= @alumni_students %> <span class="fs-3">Siswa</span></span>
								<div class="mb-0">
									<span class="badge badge-soft-info me-2 fs-6">Dari <%= @generations %> angkatan</span>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="row">
		<div class="col-12 col-lg-4 d-flex">
			<div class="card flex-fill w-100">
				<div class="card-header">
					<h5 class="card-title mb-0">Jumlah Bayar SPP Pertahun</h5>
				</div>
				<div class="card-body d-flex w-100">
					<div class="align-self-center chart">
						<div class="chartjs-size-monitor">
							<div class="chartjs-size-monitor-expand">
								<div class=""></div>
							</div>
							<div class="chartjs-size-monitor-shrink">
								<div class=""></div>
							</div>
						</div>
						<canvas id="chartjs-dashboard-bar-devices" width="782" height="600" class="chartjs-render-monitor"
							style="display: block; height: 300px; width: 391px;"></canvas>
					</div>
				</div>
			</div>
		</div>
		<div class="col-12 col-lg-8 d-flex">
			<div class="card flex-fill w-100">
				<div class="card-header">
					<h5 class="card-title mb-0">Jumlah Spp Pertahun</h5>
				</div>
				<div class="card-body d-flex w-100">
					<div class="align-self-center chart">
						<div class="chartjs-size-monitor">
							<div class="chartjs-size-monitor-expand">
								<div class=""></div>
							</div>
							<div class="chartjs-size-monitor-shrink">
								<div class=""></div>
							</div>
						</div>
						<canvas id="payed_and_not" width="782" height="600" class="chartjs-render-monitor"
							style="display: block; height: 300px; width: 391px;"></canvas>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-12 col-lg-7 col-xl-12 d-flex">
			<div class="card flex-fill">
				<div class="card-header">
					<h5 class="card-title mb-0">Kursus</h5>
				</div>
				<table id="datatables-dashboard-traffic" class="table table-striped my-0">
					<thead>
						<tr>
							<th>Source</th>
							<th class="text-end">Users</th>
							<th class="d-none d-xl-table-cell text-end">Sessions</th>
							<th class="d-none d-xl-table-cell text-end">Bounce Rate</th>
							<th class="d-none d-xl-table-cell text-end">Avg. Session Duration</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>Google</td>
							<td class="text-end">1023</td>
							<td class="d-none d-xl-table-cell text-end">1265</td>
							<td class="d-none d-xl-table-cell text-end text-success">27.23%</td>
							<td class="d-none d-xl-table-cell text-end">00:06:25</td>
						</tr>
						<tr>
							<td>Bing</td>
							<td class="text-end">504</td>
							<td class="d-none d-xl-table-cell text-end">623</td>
							<td class="d-none d-xl-table-cell text-end text-danger">66.76%</td>
							<td class="d-none d-xl-table-cell text-end">00:04:42</td>
						</tr>
						<tr>
							<td>Twitter</td>
							<td class="text-end">462</td>
							<td class="d-none d-xl-table-cell text-end">571</td>
							<td class="d-none d-xl-table-cell text-end text-success">31.53%</td>
							<td class="d-none d-xl-table-cell text-end">00:08:05</td>
						</tr>
						<tr>
							<td>Pinterest</td>
							<td class="text-end">623</td>
							<td class="d-none d-xl-table-cell text-end">770</td>
							<td class="d-none d-xl-table-cell text-end text-danger">52.81%</td>
							<td class="d-none d-xl-table-cell text-end">00:03:10</td>
						</tr>
						<tr>
							<td>Facebook</td>
							<td class="text-end">812</td>
							<td class="d-none d-xl-table-cell text-end">1003</td>
							<td class="d-none d-xl-table-cell text-end text-success">24.83%</td>
							<td class="d-none d-xl-table-cell text-end">00:05:56</td>
						</tr>
						<tr>
							<td>DuckDuckGo</td>
							<td class="text-end">693</td>
							<td class="d-none d-xl-table-cell text-end">856</td>
							<td class="d-none d-xl-table-cell text-end text-success">37.36%</td>
							<td class="d-none d-xl-table-cell text-end">00:09:12</td>
						</tr>
						<tr>
							<td>GitHub</td>
							<td class="text-end">713</td>
							<td class="d-none d-xl-table-cell text-end">881</td>
							<td class="d-none d-xl-table-cell text-end text-success">38.09%</td>
							<td class="d-none d-xl-table-cell text-end">00:06:19</td>
						</tr>
						<tr>
							<td>Direct</td>
							<td class="text-end">872</td>
							<td class="d-none d-xl-table-cell text-end">1077</td>
							<td class="d-none d-xl-table-cell text-end text-success">32.70%</td>
							<td class="d-none d-xl-table-cell text-end">00:09:18</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
	<script>
		document.addEventListener("DOMContentLoaded", function() {
			// Bar chart
			new Chart(document.getElementById("chartjs-dashboard-bar-devices"), {
				type: "bar",
				data: {
					labels: ["2017", "2018", "2019", "2020", "2021", "2022", "2023"],
					datasets: [ {
						label: "Spp",
						backgroundColor: window.theme.primary,
						borderColor: window.theme.primary,
						hoverBackgroundColor: window.theme.primary,
						hoverBorderColor: window.theme.primary,
						data: [
							<%= @spp_6_year %>, 
							<%= @spp_5_year %>, 
							<%= @spp_4_year %>, 
							<%= @spp_3_year %>, 
							<%= @spp_2_year %>, 
							<%= @spp_1_year %>, 
							<%= @spp_now_year %>, 
							],
						barPercentage: .5,
						categoryPercentage: .5
					}]
				},
				options: {
					maintainAspectRatio: false,
					cornerRadius: 15,
					legend: {
						display: false
					},
					scales: {
						yAxes: [{
							gridLines: {
								display: false
							},
							ticks: {
								beginAtZero:true,
								stepSize: 100000,
								callback: function(value) {
									return 'Rp.' + value;
								}
							},
							stacked: true,
						}],
						xAxes: [{
							gridLines: {
								color: "transparent"
							},
							stacked: true,
						}]
					}
				}
			});

		new Chart(document.getElementById("payed_and_not"), {
				type: "bar",
				data: {
					labels: ["Januari", "Februari", "Maret", "April", "Mei", "Juni", "Juli", "Agustus", "September", "Oktober", "November", "Desember"],
					datasets: [{
						label: "Belum Bayar",
						backgroundColor: window.theme.primary,
						borderColor: window.theme.primary,
						hoverBackgroundColor: window.theme.primary,
						hoverBorderColor: window.theme.primary,
						data: [
							<%= @spp_1_month_not %>,
							<%= @spp_2_month_not %>,
							<%= @spp_3_month_not %>,
							<%= @spp_4_month_not %>,
							<%= @spp_5_month_not %>,
							<%= @spp_6_month_not %>,
							<%= @spp_7_month_not %>,
							<%= @spp_8_month_not %>,
							<%= @spp_9_month_not %>,
							<%= @spp_10_month_not %>,
							<%= @spp_11_month_not %>,
							<%= @spp_12_month_not %>,
						],
						barPercentage: .5,
						categoryPercentage: .5
					}, {
						label: "Telah Bayar",
						backgroundColor: window.theme["primary-light"],
						borderColor: window.theme["primary-light"],
						hoverBackgroundColor: window.theme["primary-light"],
						hoverBorderColor: window.theme["primary-light"],
						data: [
							<%= @spp_1_month_payed %>,
							<%= @spp_2_month_payed %>,
							<%= @spp_3_month_payed %>,
							<%= @spp_4_month_payed %>,
							<%= @spp_5_month_payed %>,
							<%= @spp_6_month_payed %>,
							<%= @spp_7_month_payed %>,
							<%= @spp_8_month_payed %>,
							<%= @spp_9_month_payed %>,
							<%= @spp_10_month_payed %>,
							<%= @spp_11_month_payed %>,
							<%= @spp_12_month_payed %>,
						],
						barPercentage: .5,
						categoryPercentage: .5
					}]
				},
				options: {
					maintainAspectRatio: false,
					cornerRadius: 15,
					legend: {
						display: false
					},
					scales: {
						yAxes: [{
							gridLines: {
								display: false
							},
							ticks: {
								stepSize: 100,
							},
							stacked: true,
						}],
						xAxes: [{
							gridLines: {
								color: "transparent"
							},
							stacked: true,
						}]
					}
				}
			});

		});
	</script>
	<%# {{-- <script>
		document.addEventListener("DOMContentLoaded", function() {
			$("#datatables-dashboard-traffic").DataTable({
				pageLength: 8,
				lengthChange: false,
				bFilter: false,
				autoWidth: false,
				order: [
					[1, "desc"]
				]
			});
		});
	</script> --}} %>